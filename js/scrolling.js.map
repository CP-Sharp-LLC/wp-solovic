{"version":3,"sources":["../../../../../../../../../disk3/code/dev.susansolovic.com/wp-content/themes/solovic/js/scrolling.es6"],"names":[],"mappings":"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","file":"scrolling.js","sourcesContent":["class page_controller {\n\tconstructor() {\n\t\tthis.page_scroll_handler = new scroll_handler();\n\t\tthis.page_menu_handler = new link_handler();\n\t\tthis.current_page = 0;\n\n\t\tfunction getDocumentHeight() {\n\t\t\tconst body = document.body;\n\t\t\tconst html = document.documentElement;\n\n\t\t\treturn Math.max(\n\t\t\t\tbody.scrollHeight, body.offsetHeight,\n\t\t\t\thtml.clientHeight, html.scrollHeight, html.offsetHeight\n\t\t\t);\n\t\t}\n\n\t\tfunction getScrollTop() {\n\t\t\treturn (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n\t\t}\n\n\t\tfunction do_begin() {\n\t\t\tthis.page_menu_handler.scroll_menu($('#menu-main-menu'));\n\t\t\tthis.page_scroll_handler.addPage(++this.current_page);\n\n\t\t\t$(window).scroll(function () {\n\t\t\t\tif (getScrollTop() < getDocumentHeight() - window.innerHeight) return;\n\t\t\t\tsolovic_controller.page_scroll_handler.addPage(++solovic_controller.current_page);\n\t\t\t});\n\t\t}\n\n\t\tthis.begin = do_begin;\n\n\t\tthis.add_page = function (response) {\n\t\t\tthis.page_scroll_handler.add_page(response);\n\t\t}\n\t}\n}\n\nclass link_handler {\n\tconstructor() {\n\t\tthis.menu_container = null;\n\t\tthis.scroll_menu = function (menucontainer) {\n\t\t\tthis.menu_container = menucontainer;\n\t\t\tthis.menu_container.find(\"a\").click(function () {\n\t\t\t\tlet url = $(this).attr('href');\n\t\t\t\tsolovic_controller.page_scroll_handler.addPage(++solovic_controller.current_page, url);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass scroll_handler {\n\tconstructor() {\n\t\tthis.everlongContainer = $('#everlong_container');\n\t\tthis.everlongPager = $('#everlong_pager');\n\t\tthis.current_page = 0;\n\n\t\tthis.fetchPage = do_fetchpage;\n\n\t\tfunction do_fetchpage(page, url) {\n\t\t\tcall_nextpage(page, this.getPageId(page),\n\t\t\t\tfunction (response) {\n\t\t\t\t\tsolovic_controller.add_page(response);\n\t\t\t\t}, url);\n\t\t}\n\n\t\tthis.addPage = do_addpage;\n\n\t\tfunction do_addpage(page, url) {\n\t\t\tthis.fetchPage(page, url);\n\t\t}\n\n\t\tthis.getPageId = function (n) {\n\t\t\treturn \"everlong-\" + n;\n\t\t};\n\n\t\tthis.addPaginationPage = function (page) {\n\t\t\tlet pageLink = document.createElement('a');\n\t\t\tpageLink.innerText = page.page_id;\n\t\t\tpageLink.href = '#' + this.getPageId(page.page_id);\n\t\t\tlet listItem = document.createElement('li');\n\t\t\t$(listItem).append(pageLink);\n\n\t\t\tthis.everlongPager.append(listItem);\n\n\t\t\tif (this.current_page >= 2) {\n\t\t\t\tthis.everlongPager.removeClass('everlong-pager-inactive');\n\t\t\t}\n\t\t};\n\n\t\tthis.add_page = function (response) {\n\t\t\tthis.everlongContainer.append($(response.row));\n\t\t\tthis.addPaginationPage(response);\n\t\t\tthis.current_page++;\n\t\t}\n\t}\n}\n\nlet solovic_controller;\n\n$(document).ready(function () {\n\tsolovic_controller = new page_controller();\n\tsolovic_controller.begin();\n});\n\n"]}